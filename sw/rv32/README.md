## RISC-V software

This folder contains the RISC-V software that runs one of several RISC-V
programs.  These programs may be built with a single call to `make`, provided
that RV32 (IMC) toolchain is installed including the appropriate `newlib`
library.

Example software includes:

- [gettysburg](gettysburg.c): Interacts directly with the serial port to send
  the gettysburg address out the serial port.

- [job](job.c): Demonstrates the ability to use `printf()` to send a message to
  the serial port.

- [pingtest](pingtest.c): Works with the network stack to ping a nearby computer.  Network configuration is based upon fixed addresses.  Board and host IP information are contained in [etcnet.h](etcnet.h), and can be changed as required/necessary.  While this program is running, it will both ping a nearby host, as well as be responsive to pings from that host.  This includes responding to ARP requests from that host.

- [fftmain](fftmain.c): Demonstrates how a design might interact with an FFT accelerator.  This is sort of the ultimate/cumulated example program.  It uses the Gb ethernet (ARP, ping, IP, UDP) and the FFT accelerator.  Data requests sent to it (via [testfft.cpp](../host/testfft.cpp) will be Fourier transformed and returned.

## Particular Files of Interest

Certain particular files are important when working with any AutoFPGA based design.  In this directory, these are [board.h](board.h), [bkram.ld](bkram.ld), and [board.ld](board.ld).  All of these files are produced by AutoFPGA, and contain information regarding where peripherals are located in the design's address space.

- [board.h](board.h): This file contains any C-based definitions for peripherals found within the design.  This includes both data structures describing the address space found within the peripheral, such as `WBSCOPE` or `ENETPACKET` for examples, as well as the [addresses the various peripherals are located at](https://zipcpu.com/blog/2018/11/03/soc-fpga.html).

- [board.ld](board.ld): Since address location can change with every call to
  AutoFPGA, it's important that there be a linker script properly reflecting the current address space.  This is contained within the [board.ld](board.ld) file.  The file is generated by AutoFPGA, and then copied to a relevant location via the [master Makefile](../../Makefile) whenever `make autodata` is run.

  This is the primary linker script used for all files built in this directory.

- [bkram.ld](bkram.ld): This is a secondary debugging script, built around the use of BlockRAM only for both program instructions and data.  Since block RAM is not sufficient to hold the C library used by many of the programs in this directory, it's not often used.



